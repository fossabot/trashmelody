image: java:1.8.0-jdk

stages:
  - build
  - test
  - deploy

before_script:
#  - echo `pwd` # debug
#  - echo "$CI_BUILD_NAME, $CI_BUILD_REF_NAME $CI_BUILD_STAGE" # debug
#  - export GRADLE_USER_HOME=`pwd`/.gradle

version-checker:
  stage: build
  script: 
    - java --version
    - echo $JAVA_HOME
    - gradle --version

dependency-checker:
  stage: build
  script:
    - ./gradlew check
    - ./gradlew assemble
  artifacts:
    paths:
      - build/libs/*.jar
    expire_in: 1 week
#  only:
#    - master
#    - develop
#    - repository
#    - ./gradlew dist

run-game:
  stage: test
  script:
    - ./gradlew run

